---
title: 面试题汇总CShapeDay12
tags:
  - 面试题汇总
categories:
  - [面试题，C#]
author:
  - nightstardawn
---

# C# Day12

## 1.C#中有哪些值类型的变量（至少 13 种）？有哪些引用类型（至少 5 种）？

**答案：**

- 值类型：
  int、float、double、byte、short、long、uint、ulong、ushort、sbyte、decimal、char、bool、自定义结构体
- 引用类型：
  自定义类型、数组、字符串、委托、接口、Object

## 2.在自定义类中声明的成员变量，类型为 int，该 int 类型变量存储在栈上还是堆上？ 在自定义结构体中声明的成员变量，类型为 string，该 string 类型变量存储在栈上还是堆上？

**答案：**

1. 堆上
   自定义类中声明的成员变量，无论什么类型，都会存储在堆上
   类(引用类型)的实例本身存储在堆上，而成员变量也存储在该实例所指向的内存区域(堆上)
2. 堆上
   在结构体变量中的引用类型成员实际上会存储在堆上
   虽然结构体本身是值类型存储在栈上，但是如果结构体的成员包含引用类型，那么引用类型的对象会存储在堆上，而结构体的实例内部会包含对这些堆上对象的引用

## 3.C#中在什么情况下选择使用接口？什么情况下使用抽象类？

**答案：**

- 接口：
  1. 不同对象的共同行为（行为的抽象）
  2. 需要多继承
- 抽象类
  1. 同类对象的共同行为（物品(对象)的抽象的）
  2. 共享成员变量

## 4.C#中什么是托管内存和非托管内存？

**答案：**

- 托管内存
  托管内存是由.Net 运行时(CLR)进行管理的内存
  C#中大部分对象都是托管内存，他们的内存分配、回收、资源管理都是由 CLR 负责
  CLR 提供了自动垃圾回收机制（GC），可以自动检测不再使用的对象并释放他们占用的内存
  从而避免资源泄露问题
  比如我们平时声明的引用类型的变量都属于托管内存
- 非托管内存
  非托管内存是由应用程序自己负责管理的内容，它通常是通过调用本机 API 或者与外部系统进行交互时使用的。
  非托管内存可能不受 CLR 的管理，这意味着它不会受到垃圾回收的影响。
  但是这意味着开发者需要自己负责内存的分配和释放，否则可能会导致内存泄露或者访问无效内存的问题

## 5.什么是线程安全，如何在 c# 中实现线程安全操作？

**答案：**

1. 什么时线程安全
   多线程环境中，对共享资源(如数据、变量、对象等)进行操作时，不会产生不正确的结果或者不可预期的行为。
   在多线程程序中，由于多个线程可以同时和修改共享资源，如果没有适当的同步机制，就可能导致数据损坏，竞态条件和其他错误
   - 数据损坏：
     数据损坏是指数据在存储、传输或处理过程中发生错误，导致数据的内容或结构出现不一致、不正确或者不完整的情况
   - 竟态条件：
     多个线程试图同时访问和修改共享资源(如变量、数据结构、文件等)，从而导致程序的行为出现不确定性或不正确的结果
     竟态条件可能会导致程序的运行结果与预期不符，难以产生难以预测和复现的错误
2. 如何在 c# 中实现线程安全操作
   1. 使用锁（Lock）
   2. 异步编程（async、await）
   3. ···
