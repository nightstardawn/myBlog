---
title: FTB的工作原理
tags:
  - Unity客户端
  - Unity网络开发
  - FTB相关
categories:
  - [Unity客户端, Unity网络开发]
author:
  - nightstardawn
---

# FTB的工作原理

## 一、FTB是什么

</br>FTP(File Transfer Protocol)文件传输协议，
</br>是支持Internet文件传输的各种规则所组成的集合这些规则使Internet用户可以把文件从一台主机拷贝到另一台主机上
</br>除此之外，FTP还提供登录、目录查询以及其他会话控制等功能
</br>说人话:FTP文件传输协议就是一个在网络中上传下载文件的一套规则

## 二、工作原理

</br>本质上来说：**FTP的本质是TCP通信**
</br>通过FTP传输文件，双方至少需要建立两个TCP连接
- 一个称为控制连接，用于传输FTP命令
- 一个称为数据连接，用于传输文件数据

![FTP本质示意图](https://s2.loli.net/2025/01/23/IyfkFjLmqGPY5o9.png)

</br>**FTP的数据连接和控制连接方向一般是反的**

> </br>举例说明：
> </br>用户使用FTP客户端连接FTP服务区请求下载文件
> </br>控制连接方向：客户端主动连接服务器告知其下载命令
> </br>数据连接方向：服务端主动连接客户端下发数据

</br>客户端和FTP服务器建立连接后，需要告诉服务器使用哪一种**传输模式**
- 主动模式
  </br>服务器主动连接和客户端，然后传输文件
- 被动模式
  </br>客户端主动连接服务器，即连接控制和数据连接都是由客户端发起
- 注意：一般情况下主动模式会收到客户端防火墙影响，被动模式使用较多

数据进行传输时，一般有两种数据**传输方式**

- ASCLL传输方式
  </br>以ASCLL编码方式传输数据，适用于传输仅仅包含英文的命令和参数或者英文文本文件
- 二进制传输(常用)
  </br>可以指定采用哪一种编码传输命令和文件数据

</br>一般情况下，使用FTB传输文件时
</br>客户端必须先登录服务器，获取相应权限后
</br>才能上传或者下载文件
</br>服务器可以允许用户匿名登录FTP
</br>不需要都有一个合法权限

